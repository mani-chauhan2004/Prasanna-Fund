'use client';

import { useEffect, useRef } from 'react';

const GearAnimation = () => {
  const containerRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const handleScroll = () => {
      if (!containerRef.current) return;

      const rect = containerRef.current.getBoundingClientRect();
      const windowHeight = window.innerHeight;
      
      // Check if the container is in view
      const isInView = rect.top < windowHeight && rect.bottom > 0;
      
      if (isInView) {
        containerRef.current.classList.add('gear-scroll');
        containerRef.current.classList.remove('gear-paused');
      } else {
        containerRef.current.classList.add('gear-paused');
        containerRef.current.classList.remove('gear-scroll');
      }
    };

    // Add scroll event listener
    window.addEventListener('scroll', handleScroll);
    
    // Initial check
    handleScroll();

    // Cleanup
    return () => {
      window.removeEventListener('scroll', handleScroll);
    };
  }, []);

  return (
    <div ref={containerRef} className="gear-container">
      {/* Large Gear */}
      <div className="gear gear-large">
        <svg className="gear-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <path d="M50 0C52.7614 0 55 2.23858 55 5V15C55 17.7614 52.7614 20 50 20C47.2386 20 45 17.7614 45 15V5C45 2.23858 47.2386 0 50 0Z"/>
          <path d="M50 80C52.7614 80 55 82.2386 55 85V95C55 97.7614 52.7614 100 50 100C47.2386 100 45 97.7614 45 95V85C45 82.2386 47.2386 80 50 80Z"/>
          <path d="M0 50C0 47.2386 2.23858 45 5 45H15C17.7614 45 20 47.2386 20 50C20 52.7614 17.7614 55 15 55H5C2.23858 55 0 52.7614 0 50Z"/>
          <path d="M80 50C80 47.2386 82.2386 45 85 45H95C97.7614 45 100 47.2386 100 50C100 52.7614 97.7614 55 95 55H85C82.2386 55 80 52.7614 80 50Z"/>
          <path d="M15.8579 15.8579C17.6339 14.0819 20.3661 14.0819 22.1421 15.8579L28.2843 22C30.0603 23.776 30.0603 26.5082 28.2843 28.2843C26.5082 30.0603 23.776 30.0603 22 28.2843L15.8579 22.1421C14.0819 20.3661 14.0819 17.6339 15.8579 15.8579Z"/>
          <path d="M71.7157 71.7157C73.4917 69.9397 76.2239 69.9397 78 71.7157L84.1421 77.8579C85.9181 79.6339 85.9181 82.3661 84.1421 84.1421C82.3661 85.9181 79.6339 85.9181 77.8579 84.1421L71.7157 78C69.9397 76.2239 69.9397 73.4917 71.7157 71.7157Z"/>
          <path d="M15.8579 84.1421C17.6339 82.3661 20.3661 82.3661 22.1421 84.1421L28.2843 90.2843C30.0603 92.0603 30.0603 94.7925 28.2843 96.5685C26.5082 98.3445 23.776 98.3445 22 96.5685L15.8579 90.4264C14.0819 88.6504 14.0819 85.9182 15.8579 84.1421Z"/>
          <path d="M71.7157 28.2843C73.4917 26.5082 76.2239 26.5082 78 28.2843L84.1421 34.4264C85.9181 36.2024 85.9181 38.9346 84.1421 40.7106C82.3661 42.4866 79.6339 42.4866 77.8579 40.7106L71.7157 34.5685C69.9397 32.7925 69.9397 30.0603 71.7157 28.2843Z"/>
          <circle cx="50" cy="50" r="15" fill="none" stroke="currentColor" strokeWidth="2"/>
        </svg>
      </div>

      {/* Medium Gear */}
      <div className="gear gear-medium">
        <svg className="gear-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <path d="M50 0C52.7614 0 55 2.23858 55 5V15C55 17.7614 52.7614 20 50 20C47.2386 20 45 17.7614 45 15V5C45 2.23858 47.2386 0 50 0Z"/>
          <path d="M50 80C52.7614 80 55 82.2386 55 85V95C55 97.7614 52.7614 100 50 100C47.2386 100 45 97.7614 45 95V85C45 82.2386 47.2386 80 50 80Z"/>
          <path d="M0 50C0 47.2386 2.23858 45 5 45H15C17.7614 45 20 47.2386 20 50C20 52.7614 17.7614 55 15 55H5C2.23858 55 0 52.7614 0 50Z"/>
          <path d="M80 50C80 47.2386 82.2386 45 85 45H95C97.7614 45 100 47.2386 100 50C100 52.7614 97.7614 55 95 55H85C82.2386 55 80 52.7614 80 50Z"/>
          <path d="M15.8579 15.8579C17.6339 14.0819 20.3661 14.0819 22.1421 15.8579L28.2843 22C30.0603 23.776 30.0603 26.5082 28.2843 28.2843C26.5082 30.0603 23.776 30.0603 22 28.2843L15.8579 22.1421C14.0819 20.3661 14.0819 17.6339 15.8579 15.8579Z"/>
          <path d="M71.7157 71.7157C73.4917 69.9397 76.2239 69.9397 78 71.7157L84.1421 77.8579C85.9181 79.6339 85.9181 82.3661 84.1421 84.1421C82.3661 85.9181 79.6339 85.9181 77.8579 84.1421L71.7157 78C69.9397 76.2239 69.9397 73.4917 71.7157 71.7157Z"/>
          <path d="M15.8579 84.1421C17.6339 82.3661 20.3661 82.3661 22.1421 84.1421L28.2843 90.2843C30.0603 92.0603 30.0603 94.7925 28.2843 96.5685C26.5082 98.3445 23.776 98.3445 22 96.5685L15.8579 90.4264C14.0819 88.6504 14.0819 85.9182 15.8579 84.1421Z"/>
          <path d="M71.7157 28.2843C73.4917 26.5082 76.2239 26.5082 78 28.2843L84.1421 34.4264C85.9181 36.2024 85.9181 38.9346 84.1421 40.7106C82.3661 42.4866 79.6339 42.4866 77.8579 40.7106L71.7157 34.5685C69.9397 32.7925 69.9397 30.0603 71.7157 28.2843Z"/>
          <circle cx="50" cy="50" r="12" fill="none" stroke="currentColor" strokeWidth="2"/>
        </svg>
      </div>

      {/* Small Gear */}
      <div className="gear gear-small">
        <svg className="gear-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <path d="M50 0C52.7614 0 55 2.23858 55 5V15C55 17.7614 52.7614 20 50 20C47.2386 20 45 17.7614 45 15V5C45 2.23858 47.2386 0 50 0Z"/>
          <path d="M50 80C52.7614 80 55 82.2386 55 85V95C55 97.7614 52.7614 100 50 100C47.2386 100 45 97.7614 45 95V85C45 82.2386 47.2386 80 50 80Z"/>
          <path d="M0 50C0 47.2386 2.23858 45 5 45H15C17.7614 45 20 47.2386 20 50C20 52.7614 17.7614 55 15 55H5C2.23858 55 0 52.7614 0 50Z"/>
          <path d="M80 50C80 47.2386 82.2386 45 85 45H95C97.7614 45 100 47.2386 100 50C100 52.7614 97.7614 55 95 55H85C82.2386 55 80 52.7614 80 50Z"/>
          <path d="M15.8579 15.8579C17.6339 14.0819 20.3661 14.0819 22.1421 15.8579L28.2843 22C30.0603 23.776 30.0603 26.5082 28.2843 28.2843C26.5082 30.0603 23.776 30.0603 22 28.2843L15.8579 22.1421C14.0819 20.3661 14.0819 17.6339 15.8579 15.8579Z"/>
          <path d="M71.7157 71.7157C73.4917 69.9397 76.2239 69.9397 78 71.7157L84.1421 77.8579C85.9181 79.6339 85.9181 82.3661 84.1421 84.1421C82.3661 85.9181 79.6339 85.9181 77.8579 84.1421L71.7157 78C69.9397 76.2239 69.9397 73.4917 71.7157 71.7157Z"/>
          <path d="M15.8579 84.1421C17.6339 82.3661 20.3661 82.3661 22.1421 84.1421L28.2843 90.2843C30.0603 92.0603 30.0603 94.7925 28.2843 96.5685C26.5082 98.3445 23.776 98.3445 22 96.5685L15.8579 90.4264C14.0819 88.6504 14.0819 85.9182 15.8579 84.1421Z"/>
          <path d="M71.7157 28.2843C73.4917 26.5082 76.2239 26.5082 78 28.2843L84.1421 34.4264C85.9181 36.2024 85.9181 38.9346 84.1421 40.7106C82.3661 42.4866 79.6339 42.4866 77.8579 40.7106L71.7157 34.5685C69.9397 32.7925 69.9397 30.0603 71.7157 28.2843Z"/>
          <circle cx="50" cy="50" r="10" fill="none" stroke="currentColor" strokeWidth="2"/>
        </svg>
      </div>

      {/* Extra Small Gear */}
      <div className="gear gear-extra-small">
        <svg className="gear-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <path d="M50 0C52.7614 0 55 2.23858 55 5V15C55 17.7614 52.7614 20 50 20C47.2386 20 45 17.7614 45 15V5C45 2.23858 47.2386 0 50 0Z"/>
          <path d="M50 80C52.7614 80 55 82.2386 55 85V95C55 97.7614 52.7614 100 50 100C47.2386 100 45 97.7614 45 95V85C45 82.2386 47.2386 80 50 80Z"/>
          <path d="M0 50C0 47.2386 2.23858 45 5 45H15C17.7614 45 20 47.2386 20 50C20 52.7614 17.7614 55 15 55H5C2.23858 55 0 52.7614 0 50Z"/>
          <path d="M80 50C80 47.2386 82.2386 45 85 45H95C97.7614 45 100 47.2386 100 50C100 52.7614 97.7614 55 95 55H85C82.2386 55 80 52.7614 80 50Z"/>
          <path d="M15.8579 15.8579C17.6339 14.0819 20.3661 14.0819 22.1421 15.8579L28.2843 22C30.0603 23.776 30.0603 26.5082 28.2843 28.2843C26.5082 30.0603 23.776 30.0603 22 28.2843L15.8579 22.1421C14.0819 20.3661 14.0819 17.6339 15.8579 15.8579Z"/>
          <path d="M71.7157 71.7157C73.4917 69.9397 76.2239 69.9397 78 71.7157L84.1421 77.8579C85.9181 79.6339 85.9181 82.3661 84.1421 84.1421C82.3661 85.9181 79.6339 85.9181 77.8579 84.1421L71.7157 78C69.9397 76.2239 69.9397 73.4917 71.7157 71.7157Z"/>
          <path d="M15.8579 84.1421C17.6339 82.3661 20.3661 82.3661 22.1421 84.1421L28.2843 90.2843C30.0603 92.0603 30.0603 94.7925 28.2843 96.5685C26.5082 98.3445 23.776 98.3445 22 96.5685L15.8579 90.4264C14.0819 88.6504 14.0819 85.9182 15.8579 84.1421Z"/>
          <path d="M71.7157 28.2843C73.4917 26.5082 76.2239 26.5082 78 28.2843L84.1421 34.4264C85.9181 36.2024 85.9181 38.9346 84.1421 40.7106C82.3661 42.4866 79.6339 42.4866 77.8579 40.7106L71.7157 34.5685C69.9397 32.7925 69.9397 30.0603 71.7157 28.2843Z"/>
          <circle cx="50" cy="50" r="8" fill="none" stroke="currentColor" strokeWidth="2"/>
        </svg>
      </div>
    </div>
  );
};

export default GearAnimation; 